language: node_js
node_js: "6"
dist: trusty

cache:
  directories:
    - node_modules

addons:
  chrome: stable

before_install:
  - export CHROME_BIN=chromium-browser
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start    

install:
  - npm install
  - npm install @angular/cli

script:
  - npm run ng-build-prod
  - npm run ng-test-prod


deploy:
  provider: heroku
  app: aimas-front-end
  api_key:
    secure: "EcG9IVqifiBcC3oRIQ3O/E7VYtnExKnQuA0AAKVHNh+E0niJqf2OnECb7RM8/CaMkS3JspJlqrFiF9WzC6KlkxxX3uagg4yRhG9Znq2x9yy18iuKLVxVpXASNRcQnXtdzCQH1JUlxXOVDZ7H4H0JZ7HCJQXy24LFpAp+mI9ToE7EhBj9nb3g2stgve3NJoB8zfy/m1W81svaQhUZj1WJDb8kF+HPCTY6bKT3wXXUXQUUM9AB7jSCUDkJuwalQQozOfTeElszrNfkKaRs6HKaUeULnrrHHlid/uULpp5zLS9+L2q+ywVSzTHTUvavlKULy420kLumkU4gGxUeJqRvMd//RTB8cNx1PO+6b4gYDifoTQ4Usl+W7Lm0Gx0gEDNprZ1O9mDVfcZmDT+qFsuiB4ck7wnUg9azs2EdT02/Oyy0D/mCPqhmjI8mAgOVvFtlEUt/mzxQZxlZZyp0oh1YmV4ZcAB26jUEqftgoYgqqopWxWypxQ1at3gDbpvZdyBWZasof/K9oEGu94IkUoE7nrd0it3eXvBpRem37iCon65mbrTY4lXcMOa4Q2Myql5gfJiS0EwNcaEB2Lv8b72QYcldLCLhKsQjV1qkwOFMOT2ruhUgrgdPKS3eq7uwh44bSwIUAn7QJJOzjtn92xOPpKADSCBMfV3wShemZ2DfKKE="
